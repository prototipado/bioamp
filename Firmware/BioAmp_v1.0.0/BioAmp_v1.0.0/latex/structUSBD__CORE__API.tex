\hypertarget{structUSBD__CORE__API}{}\section{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI Struct Reference}
\label{structUSBD__CORE__API}\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}


U\+S\+BD stack Core A\+PI functions structure.  




{\ttfamily \#include $<$usbd\+\_\+core.\+h$>$}



Collaboration diagram for U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI\+:
% FIG 0
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
void($\ast$ \hyperlink{structUSBD__CORE__API_abe1068288a0eb073f7c9eee1466d4fae}{Data\+In\+Stage} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb)
\item 
void($\ast$ \hyperlink{structUSBD__CORE__API_ac4232f616e5ec409d0ca853bf704175f}{Data\+Out\+Stage} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb)
\item 
\hyperlink{error_8h_a905255056c349318139d94aa4523d516}{Error\+Code\+\_\+t}($\ast$ \hyperlink{structUSBD__CORE__API_abae19ffbccf70d251c1bdc64aefa3bc7}{Register\+Class\+Handler} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb, \hyperlink{group__USBD__Core_gaa578d29a85226108ef62c6d5c325b742}{U\+S\+B\+\_\+\+E\+P\+\_\+\+H\+A\+N\+D\+L\+E\+R\+\_\+T} pfn, void $\ast$data)
\item 
\hyperlink{error_8h_a905255056c349318139d94aa4523d516}{Error\+Code\+\_\+t}($\ast$ \hyperlink{structUSBD__CORE__API_aae115addea44c865ee6e474740a9cf80}{Register\+Ep\+Handler} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb, uint32\+\_\+t ep\+\_\+index, \hyperlink{group__USBD__Core_gaa578d29a85226108ef62c6d5c325b742}{U\+S\+B\+\_\+\+E\+P\+\_\+\+H\+A\+N\+D\+L\+E\+R\+\_\+T} pfn, void $\ast$data)
\item 
void($\ast$ \hyperlink{structUSBD__CORE__API_abf9196752dcf110a13c44a14b368e4be}{Setup\+Stage} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb)
\item 
void($\ast$ \hyperlink{structUSBD__CORE__API_a8ee40b044bb1327607dbb4185b2b7c93}{Stall\+Ep0} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb)
\item 
void($\ast$ \hyperlink{structUSBD__CORE__API_a9b57a8360ef4b3acd63ede5773813b36}{Status\+In\+Stage} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb)
\item 
void($\ast$ \hyperlink{structUSBD__CORE__API_aefbfebfc97c53ff2d5030fdd44dbec7e}{Status\+Out\+Stage} )(\hyperlink{group__USBD__Core_gafdbb2204d929cb9d75736bd2b42342ac}{U\+S\+B\+D\+\_\+\+H\+A\+N\+D\+L\+E\+\_\+T} h\+Usb)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
U\+S\+BD stack Core A\+PI functions structure. 

This module exposes functions which interact directly with U\+SB device stack\textquotesingle{}s core layer. The application layer uses this component when it has to implement custom class function driver or standard class function driver which is not part of the current U\+SB device stack. The functions exposed by this interface are to register class specific E\+P0 handlers and corresponding utility functions to manipulate E\+P0 state machine of the stack. This interface also exposes function to register custom endpoint interrupt handler. 

Definition at line 294 of file usbd\+\_\+core.\+h.



\subsection{Member Data Documentation}
\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Data\+In\+Stage@{Data\+In\+Stage}}
\index{Data\+In\+Stage@{Data\+In\+Stage}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Data\+In\+Stage}{DataInStage}}]{\setlength{\rightskip}{0pt plus 5cm}void U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Data\+In\+Stage}\hypertarget{structUSBD__CORE__API_abe1068288a0eb073f7c9eee1466d4fae}{}\label{structUSBD__CORE__API_abe1068288a0eb073f7c9eee1466d4fae}
Function to set E\+P0 state machine in data\+\_\+in state.

This function is called by U\+SB stack and the application layer to set the E\+P0 state machine in data\+\_\+in state. This function will write the data present in E\+P0\+Data buffer to E\+P0 F\+I\+FO for transmission to host. ~\newline
\begin{DoxyNote}{Note}
This interface is provided to users to invoke this function in other scenarios which are not handle by current stack. In most user applications this function is not called directly.\+Also this function can be used by users who are selectively modifying the U\+SB device stack\textquotesingle{}s standard handlers through callback interface exposed by the stack.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}


Definition at line 376 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Data\+Out\+Stage@{Data\+Out\+Stage}}
\index{Data\+Out\+Stage@{Data\+Out\+Stage}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Data\+Out\+Stage}{DataOutStage}}]{\setlength{\rightskip}{0pt plus 5cm}void U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Data\+Out\+Stage}\hypertarget{structUSBD__CORE__API_ac4232f616e5ec409d0ca853bf704175f}{}\label{structUSBD__CORE__API_ac4232f616e5ec409d0ca853bf704175f}
Function to set E\+P0 state machine in data\+\_\+out state.

This function is called by U\+SB stack and the application layer to set the E\+P0 state machine in data\+\_\+out state. This function will read the control data (E\+P0 out packets) received from U\+SB host into E\+P0\+Data buffer. ~\newline
\begin{DoxyNote}{Note}
This interface is provided to users to invoke this function in other scenarios which are not handle by current stack. In most user applications this function is not called directly.\+Also this function can be used by users who are selectively modifying the U\+SB device stack\textquotesingle{}s standard handlers through callback interface exposed by the stack.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}


Definition at line 394 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Register\+Class\+Handler@{Register\+Class\+Handler}}
\index{Register\+Class\+Handler@{Register\+Class\+Handler}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Register\+Class\+Handler}{RegisterClassHandler}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Error\+Code\+\_\+t} U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Register\+Class\+Handler}\hypertarget{structUSBD__CORE__API_abae19ffbccf70d251c1bdc64aefa3bc7}{}\label{structUSBD__CORE__API_abae19ffbccf70d251c1bdc64aefa3bc7}
Function to register class specific E\+P0 event handler with U\+SB device stack.

The application layer uses this function when it has to register the custom class\textquotesingle{}s E\+P0 handler. The stack calls all the registered class handlers on any E\+P0 event before going through default handling of the event. This gives the class handlers to implement class specific request handlers and also to override the default stack handling for a particular event targeted to the interface. Check \hyperlink{group__USBD__Core_gaa578d29a85226108ef62c6d5c325b742}{U\+S\+B\+\_\+\+E\+P\+\_\+\+H\+A\+N\+D\+L\+E\+R\+\_\+T} for more details on how the callback function should be implemented. Also application layer could use this function to register E\+P0 handler which responds to vendor specific requests.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\mbox{\tt in}  & {\em pfn} & Class specific E\+P0 handler function. \\
\hline
\mbox{\tt in}  & {\em data} & Pointer to the data which will be passed when callback function is called by the stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns \hyperlink{error_8h_a905255056c349318139d94aa4523d516}{Error\+Code\+\_\+t} type to indicate success or error condition. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em L\+P\+C\+\_\+\+OK} & On success \\
\hline
{\em E\+R\+R\+\_\+\+U\+S\+B\+D\+\_\+\+T\+O\+O\+\_\+\+M\+A\+N\+Y\+\_\+\+C\+L\+A\+S\+S\+\_\+\+H\+D\+L\+R(0x0004000c)} & The number of class handlers registered is greater than the number of handlers allowed by the stack. \\
\hline
\end{DoxyRetVals}


Definition at line 316 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Register\+Ep\+Handler@{Register\+Ep\+Handler}}
\index{Register\+Ep\+Handler@{Register\+Ep\+Handler}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Register\+Ep\+Handler}{RegisterEpHandler}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Error\+Code\+\_\+t} U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Register\+Ep\+Handler}\hypertarget{structUSBD__CORE__API_aae115addea44c865ee6e474740a9cf80}{}\label{structUSBD__CORE__API_aae115addea44c865ee6e474740a9cf80}
Function to register interrupt/event handler for the requested endpoint with U\+SB device stack.

The application layer uses this function to register the endpoint event handler. The stack calls all the registered endpoint handlers when
\begin{DoxyItemize}
\item U\+S\+B\+\_\+\+E\+V\+T\+\_\+\+O\+UT or U\+S\+B\+\_\+\+E\+V\+T\+\_\+\+O\+U\+T\+\_\+\+N\+AK events happen for O\+UT endpoint.
\item U\+S\+B\+\_\+\+E\+V\+T\+\_\+\+IN or U\+S\+B\+\_\+\+E\+V\+T\+\_\+\+I\+N\+\_\+\+N\+AK events happen for IN endpoint. Check U\+S\+B\+\_\+\+E\+P\+\_\+\+H\+A\+N\+D\+L\+E\+R\+\_\+T for more details on how the callback function should be implemented. \begin{DoxyNote}{Note}
By default endpoint \+\_\+\+N\+AK events are not enabled. Application should call \hyperlink{structUSBD__HW__API_a8556c919546438e9ca184c460cd1daa9}{U\+S\+B\+D\+\_\+\+H\+W\+\_\+\+A\+P\+I\+\_\+\+T\+::\+Enable\+Event} for the corresponding endpoint.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\mbox{\tt in}  & {\em ep\+\_\+index} & Endpoint index. Computed as
\begin{DoxyItemize}
\item For O\+UT endpoints = 2 $\ast$ endpoint number eg. for E\+P2\+\_\+\+O\+UT it is 4.
\item For IN endopoints = (2 $\ast$ endpoint number) + 1 eg. for E\+P2\+\_\+\+IN it is 5. 
\end{DoxyItemize}\\
\hline
\mbox{\tt in}  & {\em pfn} & Endpoint event handler function. \\
\hline
\mbox{\tt in}  & {\em data} & Pointer to the data which will be passed when callback function is called by the stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns \hyperlink{error_8h_a905255056c349318139d94aa4523d516}{Error\+Code\+\_\+t} type to indicate success or error condition. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em L\+P\+C\+\_\+\+OK} & On success \\
\hline
{\em E\+R\+R\+\_\+\+A\+P\+I\+\_\+\+I\+N\+V\+A\+L\+I\+D\+\_\+\+P\+A\+R\+A\+M2} & ep\+\_\+index is outside the boundary ( $<$ 2 $\ast$ \hyperlink{structUSBD__API__INIT__PARAM_a168996cbd91b47939fe823bf0bf7cbe0}{U\+S\+B\+D\+\_\+\+A\+P\+I\+\_\+\+I\+N\+I\+T\+\_\+\+P\+A\+R\+A\+M\+\_\+\+T\+::max\+\_\+num\+\_\+ep}). \\
\hline
\end{DoxyRetVals}

\end{DoxyItemize}

Definition at line 340 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Setup\+Stage@{Setup\+Stage}}
\index{Setup\+Stage@{Setup\+Stage}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Setup\+Stage}{SetupStage}}]{\setlength{\rightskip}{0pt plus 5cm}void U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Setup\+Stage}\hypertarget{structUSBD__CORE__API_abf9196752dcf110a13c44a14b368e4be}{}\label{structUSBD__CORE__API_abf9196752dcf110a13c44a14b368e4be}
Function to set E\+P0 state machine in setup state.

This function is called by U\+SB stack and the application layer to set the E\+P0 state machine in setup state. This function will read the setup packet received from U\+SB host into stack\textquotesingle{}s buffer. ~\newline
\begin{DoxyNote}{Note}
This interface is provided to users to invoke this function in other scenarios which are not handle by current stack. In most user applications this function is not called directly.\+Also this function can be used by users who are selectively modifying the U\+SB device stack\textquotesingle{}s standard handlers through callback interface exposed by the stack.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}


Definition at line 358 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Stall\+Ep0@{Stall\+Ep0}}
\index{Stall\+Ep0@{Stall\+Ep0}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Stall\+Ep0}{StallEp0}}]{\setlength{\rightskip}{0pt plus 5cm}void U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Stall\+Ep0}\hypertarget{structUSBD__CORE__API_a8ee40b044bb1327607dbb4185b2b7c93}{}\label{structUSBD__CORE__API_a8ee40b044bb1327607dbb4185b2b7c93}
Function to set E\+P0 state machine in stall state.

This function is called by U\+SB stack and the application layer to generate S\+T\+A\+LL signaling on E\+P0 endpoint. This function will also reset the E\+P0\+Data buffer. ~\newline
\begin{DoxyNote}{Note}
This interface is provided to users to invoke this function in other scenarios which are not handle by current stack. In most user applications this function is not called directly.\+Also this function can be used by users who are selectively modifying the U\+SB device stack\textquotesingle{}s standard handlers through callback interface exposed by the stack.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}


Definition at line 447 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Status\+In\+Stage@{Status\+In\+Stage}}
\index{Status\+In\+Stage@{Status\+In\+Stage}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Status\+In\+Stage}{StatusInStage}}]{\setlength{\rightskip}{0pt plus 5cm}void U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Status\+In\+Stage}\hypertarget{structUSBD__CORE__API_a9b57a8360ef4b3acd63ede5773813b36}{}\label{structUSBD__CORE__API_a9b57a8360ef4b3acd63ede5773813b36}
Function to set E\+P0 state machine in status\+\_\+in state.

This function is called by U\+SB stack and the application layer to set the E\+P0 state machine in status\+\_\+in state. This function will send zero length IN packet on E\+P0 to host, indicating positive status. ~\newline
\begin{DoxyNote}{Note}
This interface is provided to users to invoke this function in other scenarios which are not handle by current stack. In most user applications this function is not called directly.\+Also this function can be used by users who are selectively modifying the U\+SB device stack\textquotesingle{}s standard handlers through callback interface exposed by the stack.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}


Definition at line 412 of file usbd\+\_\+core.\+h.

\index{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}!Status\+Out\+Stage@{Status\+Out\+Stage}}
\index{Status\+Out\+Stage@{Status\+Out\+Stage}!U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI@{U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+PI}}
\subsubsection[{\texorpdfstring{Status\+Out\+Stage}{StatusOutStage}}]{\setlength{\rightskip}{0pt plus 5cm}void U\+S\+B\+D\+\_\+\+C\+O\+R\+E\+\_\+\+A\+P\+I\+::\+Status\+Out\+Stage}\hypertarget{structUSBD__CORE__API_aefbfebfc97c53ff2d5030fdd44dbec7e}{}\label{structUSBD__CORE__API_aefbfebfc97c53ff2d5030fdd44dbec7e}
Function to set E\+P0 state machine in status\+\_\+out state.

This function is called by U\+SB stack and the application layer to set the E\+P0 state machine in status\+\_\+out state. This function will read the zero length O\+UT packet received from U\+SB host on E\+P0. ~\newline
\begin{DoxyNote}{Note}
This interface is provided to users to invoke this function in other scenarios which are not handle by current stack. In most user applications this function is not called directly.\+Also this function can be used by users who are selectively modifying the U\+SB device stack\textquotesingle{}s standard handlers through callback interface exposed by the stack.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em h\+Usb} & Handle to the U\+SB device stack. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Nothing. 
\end{DoxyReturn}


Definition at line 429 of file usbd\+\_\+core.\+h.



The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{usbd__core_8h}{usbd\+\_\+core.\+h}\end{DoxyCompactItemize}
